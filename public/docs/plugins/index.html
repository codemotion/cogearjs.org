<!DOCTYPE html><head><title>Plugins | Documentation | Cogear.JS - modern static sites generator</title><meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, minimum-scale=1.0, maximum-scale=1"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link rel="shortcut icon" href="/favicon.png" type="image/png"><meta name="description" content="Cogear.JS plugins system documentation."><meta name="keywords" content="cogear,webpack,node,javascript,markdown,generator,website,hot-reload,themes,plugins,github"><meta property="og:title" content="Plugins"><meta property="og:type" content="website"><meta property="og:url" content="https://cogearjs.org/"><meta property="og:description" content="Cogear.JS plugins system documentation."><meta property="og:image" content="https://github.com/codemotion/cogear-storage/blob/master/images/cogearjs.jpg?raw=true"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Plugins"><meta name="twitter:creator" content="@cogearjs"><meta name="twitter:description" content="Cogear.JS plugins system documentation."><meta name="twitter:image" content="https://github.com/codemotion/cogear-storage/blob/master/images/cogearjs.jpg?raw=true"><meta name="theme-color" content="#662D8C"><link href="../../css/js/docs.js.37461.css?374615d6e011e594e1e6" rel="stylesheet"><script type="text/javascript" src="../../js/docs.js.37461.js?374615d6e011e594e1e6"></script></head><body><nav class="navbar" role="navigation" aria-label="main navigation"><div class="container"><div class="navbar-brand"> <div class="navbar-item"><a href="/">COGEAR.JS</a></div><a class="navbar-burger" role="button" aria-label="menu" aria-expanded="false" data-target="menu"><span aria-hidden="true"></span><span aria-hidden="true"></span><span aria-hidden="true"></span></a></div><div class="navbar-menu animated faster" id="menu"><div class="navbar-start"><div class="navbar-item"><a href="/docs">Docs</a></div></div><div class="navbar-end"><a class="navbar-item" href="/blog">Blog</a><a class="navbar-item" href="/videos">Videos</a><a class="navbar-item" href="https://github.com/codemotion/cogear.js">Github</a><a class="navbar-item" href="https://github.com/codemotion/cogear.js/issues">Issues</a><a class="navbar-item" href="https://github.com/codemotion/cogear.js/wiki">Wiki</a><a class="navbar-item" href="/docs/license">License</a></div></div></div></nav><main><div class="container"><aside class="menu"><div class="menu-wrapper"><p class="menu-label" id="version">v1.0.0</p><ul class="menu-list"><li><a href="/docs">Getting started</a></li><li><a href="/docs/workflow">Workflow</a></li><li><a href="/docs/themes">Themes</a></li><li><a class="is-active" href="/docs/plugins">Plugins</a></li><li><a href="/docs/webpack">Webpack</a></li><li><a href="/docs/deploy">Deploy</a></li><li><a href="/docs/license">License</a></li><li><a href="/docs/support">Support</a></li></ul></div></aside><section class="markdown-body"><h1 id="basics">Basics</h1>
<p>Plugins extend <strong>Cogear.JS</strong> functionality. </p>
<p>They hook into the core and can do a lot:</p>
<ul>
<li>Change webpack config to add loaders and rules</li>
<li>Change build process</li>
<li>Add more CLI options</li>
<li>Use imagination</li>
</ul>
<h1 id="installation">Installation</h1>
<p>All the plugins are represented in <code>npm</code> by packages prefixed with <code>cogear-plugin-</code>.</p>
<article class="message is-success">
  <div class="message-body"><b>Cogear.JS</b> plugin is a npm package.</div>
</article>

<article class="message is-warning">
  <div class="message-body">All the following paths <b>are relative to the plugin folder</b>.</div>
</article>

<p>For example if you want to install <a href="https://www.npmjs.com/package/cogear-plugin-pages-json"><code>pages-json</code></a> plugin which calls appropriate <strong>Webpack</strong> plugin, you should do the following:</p>
<pre><code class="language-bash">&gt; npm install cogear-plugin-pages-json
# or
&gt; yarn add cogear-plugin-pages-json</code></pre>
<p>You don&#39;t need to enable it manually becase the systems core will do it for you.</p>
<h2 id="config">Config</h2>
<p>If you have <code>plugins</code> section in your <code>./config.yaml</code>, core will load plugins only mention there.</p>
<p>Example: <code>./config.yaml</code></p>
<pre><code class="language-yaml">#... Site config
plugins:
    - pages-json
    - blog
    - videos
    - sitemap</code></pre>
<blockquote>
<p>Config-defined plugins disable autoloading from <code>node_modules</code>.</p>
</blockquote>
<p>You can use globally-installed plugins (<strong>npm packages</strong>) with this method.</p>
<h2 id="local">Local</h2>
<p>You can create <code>./plugins</code> folder in the root of you project and then download, generate or git clone <code>plugins</code> there.</p>
<pre><code class="language-bash">./plugins
├── awesome                # plugin in development
└── cogear-plugin-awesome  # the same, but ready for npm</code></pre>
<blockquote>
<p>Locally stored plugins have a higher priority over the <code>npm packages</code>.</p>
</blockquote>
<h1 id="structure">Structure</h1>
<p><code>Plugin</code> is a typical <code>npm</code> package.</p>
<p>It can be bundled with <code>Webpack</code> also as any other node module.</p>
<p>Let&#39;s start to develop <code>compressor</code> plugin and define it&#39;s file structure.</p>
<p>Listing: <code>cogear-plugin-compressor</code></p>
<pre><code class="language-bash">./cogear-plugin-compressor
├── README.md     # README
├── package.json  # npm package info file
└── plugin.js     # main scripts file</code></pre>
<p>Listing: <code>cogear-plugin-compress/package.json</code></p>
<pre><code class="language-json">{
    &quot;name&quot;: &quot;cogear-plugin-compression&quot;,
    &quot;description&quot;: &quot;Cogear.JS compression plugin. Adds compression options to webpack production config.&quot;,
    &quot;version&quot;: &quot;1.0.0&quot;,
    &quot;author&quot;: &quot;Dmitriy Belyaev&lt;admin@cogearjs.org&gt;&quot;,
    &quot;homepage&quot;: &quot;https://github.com/codemotion/cogear-plugin-compression&quot;,
    &quot;main&quot;: &quot;./compress.js&quot;
}</code></pre>
<p>Listing: <code>cogear-plugin-compress/compress.js</code></p>
<pre><code class="language-javascript">const CompressionPlugin = require(&quot;compression-webpack-plugin&quot;)

module.exports = {
    apply(cogear){
        cogear.hooks.webpackProd.tap(&#39;cogear-plugin-compress&#39;,(config)=&gt;{
            config.plugins.push(new CompressionPlugin()))
        })
    }
}</code></pre>
<p>Plugin script should return basic object with required <code>apply</code> method which recieves <code>cogear</code> instance as an argument.</p>
<p>That&#39;s it.</p>
<blockquote>
<p>But you don&#39;t need to create such a plugin, because production assets compression <strong>is already in the core</strong> of <strong>Cogear.JS</strong>.</p>
</blockquote>
<h1 id="hooks">Hooks</h1>
<p>Hooks are implemented from <a href="https://github.com/webpack/tapable"><code>webpack/tapable</code></a>.</p>
<p>If you are familiar with webpack plugins, there will be nothin new for you.</p>
<p>List of all hooks available in the systems core <code>./lib/cogear.js</code>:</p>
<pre><code class="language-javascript">module.exports = class Cogear {
    constructor() {
        ...
        this.hooks = {
            cli: new SyncHook([&quot;defaults&quot;]),
            banner: new SyncHook(),
            init: new SyncHook(),
            config: new SyncHook(),
            death: new SyncHook(),
            build: new SyncHook(),
            clearBuild: new SyncHook(),
            buildPage: new SyncHook([&quot;file&quot;]),
            buildPagesJSON: new SyncHook([&quot;pages&quot;]),
            loadPagesForWebpack: new SyncHook(),
            webpackProd: new SyncHook([&quot;startServer&quot;]),
            webpackDev: new SyncHook(),
            buildDone: new SyncHook(), // When `cogear build` command is finished
            help: new SyncHook([&quot;help&quot;]),
            generators: {
                init: new SyncHook([&quot;type&quot;]),
                site: new SyncHook(),
                plugin: new SyncHook(),
                theme: new SyncHook(),
            },
            deploy: new SyncHook()
        }
        this
        .load(&#39;utils&#39;)
        .load(&#39;init&#39;)
        .load(&#39;config&#39;)
        .load(&#39;help&#39;)
        .load(&#39;death&#39;)
        .load(&#39;build&#39;)
        .load(&#39;clearBuild&#39;)
        .load(&#39;buildPage&#39;)
        .load(&#39;loadPagesForWebpack&#39;)
        .load(&#39;webpack.dev&#39;)
        .load(&#39;webpack.prod&#39;)
        .load(&#39;generators/init&#39;)
        .load(&#39;generators/site&#39;)
        .load(&#39;generators/plugin&#39;)
        .load(&#39;generators/theme&#39;)
        .load(&#39;autoloader&#39;)    
        .load(&#39;deploy&#39;)
        .load(&#39;cli&#39;)
    }
    ...
}</code></pre>
<p>As you&#39;ve mentioned, <strong>Cogear.JS</strong> core is built with hooks and plugins.</p>
<p>And all you have to do in your plugin is to use aproppriate hook:</p>
<pre><code class="language-javascript">module.exports = {
    apply(cogear){
        cogear.hooks.webpackProd.tap(&#39;My awesome plugin&#39;,(config)=&gt;{
            // Do something with cogear instance and config argument
            // Hint: cogear.webpackConfig is provided
        })
    }
}</code></pre>
<h1 id="generator">Generator</h1>
<p>To generate new plugin from scratch just use this command:</p>
<pre><code class="language-bash">&gt; cogear plugin [plugin-name]</code></pre>
<p>Where <code>plugin-name</code> is a plugin folder and short name.</p>
<p><img src="/images/generator-01ef5b.svg" alt="generator"></p>
<p>It will automatically build basic file structure for you.</p>
</section></div></main><footer><p id="copyleft">Proudly built with <a href="https://cogearjs.org">Cogear.JS</a> © 2018</p></footer></body>